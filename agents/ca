#!/bin/bash

# Quick Claude Agent Selector
# Usage: ca (or ./ca)

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Colors
Y='\033[1;33m'
B='\033[0;34m'
G='\033[0;32m'
N='\033[0m'

echo -e "${G}Select agent:${N}"
echo -e "  ${Y}1${N}) 🔒 Security"
echo -e "  ${Y}2${N}) 📝 Code Review"
echo -e "  ${Y}3${N}) 🚀 Development"
echo -e "  ${Y}4${N}) 🧪 Testing"

read -n 1 -p "> " choice
echo

case $choice in
    1) 
        ROLE="You are a security reviewer agent for Notionally. Focus on: auditing for vulnerabilities, input validation, CORS/CSP policies, injection attacks, rate limiting, and sensitive data exposure. Review code with security as the top priority."
        exec claude --append-system-prompt "$ROLE"
        ;;
    2) 
        ROLE="You are a code reviewer agent for Notionally. Focus on: code structure, patterns, performance, error handling, test coverage, and following v2.0.0 modular architecture. Ensure code quality and maintainability."
        exec claude --append-system-prompt "$ROLE"
        ;;
    3) 
        ROLE="You are a feature developer agent for Notionally. Focus on: implementing features, fixing bugs, writing tests, following existing patterns, and making small incremental changes. Always test before committing. Maintain backward compatibility."
        exec claude --append-system-prompt "$ROLE"
        ;;
    4) 
        ROLE="You are a test runner agent for Notionally. Focus on: executing test suites, integration testing, edge cases, load testing, and verifying fixes. Run test-critical.sh and ensure all tests pass."
        exec claude --append-system-prompt "$ROLE"
        ;;
    *) echo "Invalid"; exit 1 ;;
esac